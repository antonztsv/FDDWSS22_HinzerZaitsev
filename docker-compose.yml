version: "3.8"
services:
    frontend:
        build: ./frontend
        container_name: frontend
        ports:
            - "3000:3000"
        volumes:
            - ./frontend:/app
            - ./app/node_modules
        stdin_open: true
        tty: true
    game_service:
        build: ./backend/game_service
        ports:
            - "8000:8000"
        volumes:
            - ./backend/game_service:/backend/game_service
        depends_on:
            - rabbitmq
    card_service:
        build: ./backend/card_service
        ports:
            - "8002:8002"
        volumes:
            - ./backend/card_service:/backend/card_service
        depends_on:
            - rabbitmq
    player_service:
        build: ./backend/player_service
        ports:
            - "8001:8001"
        volumes:
            - ./backend/player_service:/backend/player_service
        depends_on:
            - rabbitmq
    auth_service:
        build: ./backend/authentication_service
        ports:
            - "8003:8003"
        volumes:
            - ./backend/auth_service:/backend/auth_service
        depends_on:
            - rabbitmq
    rabbitmq:
        image: rabbitmq:3-management
        ports:
            - "5672:5672"
            - "15672:15672"
    mongo:
        image: "mongo"
        ports:
            - "27017:27017"
        volumes:
            - "mongodb:/data/db"
volumes:
    mongodb:
